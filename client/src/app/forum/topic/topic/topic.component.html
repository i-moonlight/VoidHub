<div class="flex flex-col">
  <div class="flex flex-col" *ngIf="topic">
    <div>
      <div class="text-3xl font-bold">{{topic.title}}</div>
      <div class="text-xs text-secondary-content flex flex-row">
        <div>posts: {{topic.postsCount}}</div>
      </div>
      <div class="mt-3">
        <app-post [post]="topic?.post" [user]="user"></app-post>
      </div>
    </div>
    <div class="my-3">
      <app-paginator
        (changePage)="changePage($event)"
        [max]="topic.postsCount / postsOnPage"
        [currentPage]="currentPage">
      </app-paginator>
    </div>

    <div>
      <div *ngFor="let post of posts" class="my-2">
        <app-post
          [post]="post"
          [user]="user"
          (deleted)="onPostDelete()">
        </app-post>
      </div>
    </div>

    <div class="my-3">
      <app-paginator
        (changePage)="changePage($event)"
        [max]="topic.postsCount / postsOnPage"
        [currentPage]="currentPage">
      </app-paginator>
    </div>
    <app-post-editor
      *ngIf="user"
      [topicId]="topic.id"
      [content]="newPostContent"
      [cancelPlaceholder]="'Clear'"
      (onCreate)="onPostCreate($event)">
    </app-post-editor>
  </div>

  <ng-template #topicClosed>
    <div class="text-center text-3xl text-error">
      Topic is closed
    </div>
  </ng-template>
</div>
